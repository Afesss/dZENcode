(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[778],{1829:e=>{e.exports={product:"product_product__EpYIo",circle:"product_circle__9a8nQ",greenBackgroud:"product_greenBackgroud__6FrYn",blackBackground:"product_blackBackground__A33QU",icon:"product_icon__h660S",titleContainer:"product_titleContainer__O2JaE",titleText:"product_titleText__4lOh_",serialNumberText:"product_serialNumberText__PNPCE",statusText:"product_statusText__voOwk",textGreen:"product_textGreen__JAERJ",textBlack:"product_textBlack__jAUkY",guaranteeContainer:"product_guaranteeContainer__3_ayT",isNewText:"product_isNewText__utHe3",priceContainer:"product_priceContainer__SwIYI",usdPriceText:"product_usdPriceText__zqNlz",uahPriceText:"product_uahPriceText__DEscl",groupNameText:"product_groupNameText__wvaAN",nameText:"product_nameText__vKFeO",orderTitleText:"product_orderTitleText__3AZw5",dateContainer:"product_dateContainer__rmQQa",dateFull:"product_dateFull__vo7kr",dateShort:"product_dateShort__SRxoK",trashIcon:"product_trashIcon__1kdtn"}},2215:e=>{e.exports={icon:"order-icon_icon__5vHHZ",content:"order-icon_content__fpx3X",circle:"order-icon_circle__Py4ET",rectangle:"order-icon_rectangle__YMLsR"}},2362:(e,t,r)=>{"use strict";let a;r.d(t,{J:()=>d,u:()=>i});var c=r(3464),o=r(4065);let i=async()=>{if(a)return a;try{let e=await c.A.get(o.m);if(200===e.status)return a=e.data,e.data;console.error("Failed to load orders:",e.statusText)}catch(e){console.error(e)}},d=e=>{a&&(a=a.filter(t=>t.id!=e))}},3162:e=>{e.exports={loader:"loader_loader__zgpwE",icon:"loader_icon__Vq7Oj","icon-animation":"loader_icon-animation__UUzW9"}},3313:(e,t,r)=>{"use strict";r.d(t,{A:()=>_,y:()=>p});var a=r(5155),c=r(1829),o=r.n(c),i=r(6766),d=r(6304),n=r(7132),s=r(4500),l=r(6708),u=r(3463);let p="Вы уверены, что хотите удалить этот продукт?";function _(e){let t=(0,s.j)(),r=t=>{let r=e.product.price.find(e=>e.symbol===t);return r?"".concat((0,d.Xt)(r.value)," ").concat(r.symbol):""};return(0,a.jsxs)(u.P.div,{className:o().product,initial:{height:0,scaleY:0},animate:{height:"48px",scaleY:1},exit:{height:0,scaleY:0},transition:{duration:.2},style:{transformOrigin:"top"},children:[(0,a.jsx)("div",{className:"".concat(o().circle," ").concat(0===e.product.isNew?o().greenBackgroud:o().blackBackground)}),(0,a.jsx)(i.default,{src:"".concat(d.Jp).concat(e.product.photo),alt:"icon",width:30,height:20,className:o().icon}),(0,a.jsxs)("div",{className:o().titleContainer,children:[(0,a.jsx)("p",{className:o().titleText,children:e.product.title}),(0,a.jsx)("p",{className:o().serialNumberText,children:e.product.serialNumber})]}),(0,a.jsx)("p",{className:"".concat(o().statusText," ").concat(0==e.product.isNew?o().textBlack:o().textGreen),children:0===e.product.isNew?"В ремонте":"свободен"}),(0,a.jsxs)("div",{className:o().guaranteeContainer,children:[(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{children:"c\xa0\xa0\xa0"}),(0,a.jsx)("span",{children:(0,d.ak)(e.product.guarantee.start)})]}),(0,a.jsxs)("p",{children:[(0,a.jsx)("span",{children:"по\xa0"}),(0,a.jsx)("span",{children:(0,d.ak)(e.product.guarantee.end)})]})]}),(0,a.jsx)("p",{className:o().isNewText,children:0===e.product.isNew?"Б / У":"новый"}),(0,a.jsxs)("div",{className:o().priceContainer,children:[(0,a.jsx)("p",{className:o().usdPriceText,children:r(n.A.usd)}),(0,a.jsx)("p",{className:o().uahPriceText,children:r(n.A.uah)})]}),(0,a.jsx)("p",{className:o().groupNameText,children:e.product.type}),(0,a.jsx)("p",{className:o().nameText,children:"—"}),(0,a.jsx)("p",{className:o().orderTitleText,children:(()=>{let t=e.orders.find(t=>t.id===e.product.order);return t?null==t?void 0:t.title:""})()}),(0,a.jsxs)("div",{className:o().dateContainer,children:[(0,a.jsx)("p",{className:o().dateShort,children:(0,d.zh)(e.product.date)}),(0,a.jsx)("p",{className:o().dateFull,children:(0,d._w)(e.product.date)})]}),(0,a.jsx)(i.default,{src:"".concat(d.Jp,"/icons/trash-icon.png"),alt:"trash icon",width:12,height:14,className:o().trashIcon,onClick:()=>void t((0,l.ol)({message:p,deleteItemId:e.product.id.toString(),deleteItemTitle:e.product.title,deleteItemSerialNumber:e.product.serialNumber.toString(),deleteIconPath:e.product.photo}))})]})}},4065:(e,t,r)=>{"use strict";r.d(t,{m:()=>o,v:()=>c});var a=r(6304);let c="".concat(a.Jp,"/data/orders.json"),o="{basePath}/data/products.json"},4500:(e,t,r)=>{"use strict";r.d(t,{G:()=>o,j:()=>c});var a=r(4540);let c=()=>(0,a.wA)(),o=a.d4},5658:e=>{e.exports={container:"available-produc_container__kLTzi",leftSide:"available-produc_leftSide__LmVd9",circle:"available-produc_circle__VPew3",icon:"available-produc_icon__M__PN",titleContainer:"available-produc_titleContainer__l8J7o",producTitleText:"available-produc_producTitleText__E6XDK",productSerialNumberText:"available-produc_productSerialNumberText__RyX8G",freeText:"available-produc_freeText__4MyFk",trashIcon:"available-produc_trashIcon__y9Op3",textGreen:"available-produc_textGreen__2l1EO",textBlack:"available-produc_textBlack__yx4Bk"}},5961:e=>{e.exports={container:"order-product_container__ZGcsJ",orderTitle:"order-product_orderTitle__3mS5Q",addProductContainer:"order-product_addProductContainer__z53qt",addProductCircle:"order-product_addProductCircle__MypXc",availableProductsContainer:"order-product_availableProductsContainer___wp84",closeButton:"order-product_closeButton__fmqxd"}},6116:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(5155),c=r(6304),o=r(3162),i=r.n(o),d=r(6766);function n(){return(0,a.jsx)("div",{className:i().loader,children:(0,a.jsx)(d.default,{src:"".concat(c.Jp,"/icons/loading-icon.svg"),alt:"Loading",width:100,height:100,className:i().icon})})}},6304:(e,t,r)=>{"use strict";r.d(t,{Cy:()=>i,Jp:()=>a,Xt:()=>l,_w:()=>c,ak:()=>o,gm:()=>n,n9:()=>d,zh:()=>s});let a="/dZENcode";function c(e){let t=new Date(e),r=new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"long",year:"numeric"}).format(t).split(" ");return r.length>3?"".concat(r[0]," / ").concat(u(r[1]).slice(0,3)," / ").concat(r[2]):(console.error("failed formatted.split",r),"")}function o(e){let t=new Date(e),r=new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"2-digit",year:"numeric"}).format(t).split(".");return r.length>=3?"".concat(r[0]," / ").concat(r[1]," / ").concat(r[2]):(console.error("failed formatted.split",r),"")}function i(e){return new Intl.DateTimeFormat("ru-RU",{day:"2-digit",month:"short",year:"numeric"}).format(e)}function d(e){return new Intl.DateTimeFormat("ru-RU",{hour:"2-digit",minute:"2-digit"}).format(e)}function n(e){let t=new Intl.DateTimeFormat("ru-RU",{weekday:"long"}).format(e);return u(t)}function s(e){let t=new Date(e),r=String(t.getDay()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0");return"".concat(r," / ").concat(a)}function l(e){return new Intl.NumberFormat("ru-RU",{minimumFractionDigits:0,maximumFractionDigits:2}).format(e).replace(",",".")}function u(e){return e[0].toUpperCase()+e.slice(1)}},6708:(e,t,r)=>{"use strict";r.d(t,{Ay:()=>d,LD:()=>c,P8:()=>i,ol:()=>o});let a=(0,r(1990).Z0)({name:"deleteModal",initialState:{showModal:!1,message:"",deleteItemId:"",deleteItemTitle:"",deleteItemSerialNumber:"",deleteItemIconPath:"",delete:!1},reducers:{showDeleteModal:(e,t)=>(e.showModal=!0,e.message=t.payload.message,e.deleteItemTitle=t.payload.deleteItemTitle,e.deleteItemSerialNumber=t.payload.deleteItemSerialNumber,e.deleteItemIconPath=t.payload.deleteIconPath,e.deleteItemId=t.payload.deleteItemId,e.delete=!1,e),hideDeleteModal:(e,t)=>(e.showModal=!1,e.message="",e.deleteItemId="",e.delete=!1,e),deleteItem:(e,t)=>(e.delete=!0,e)}}),{deleteItem:c,showDeleteModal:o,hideDeleteModal:i}=a.actions,d=a.reducer},7130:(e,t,r)=>{Promise.resolve().then(r.bind(r,7482))},7132:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a={uah:"UAH",usd:"USD"}},7482:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>O});var a=r(5155),c=r(2115),o=r(7874),i=r.n(o),d=r(7660),n=r(8707),s=r.n(n),l=r(2215),u=r.n(l);function p(){return(0,a.jsxs)("div",{className:u().icon,children:[(0,a.jsxs)("div",{className:u().content,children:[(0,a.jsx)("div",{className:u().circle}),(0,a.jsx)("div",{className:u().rectangle})]}),(0,a.jsxs)("div",{className:u().content,children:[(0,a.jsx)("div",{className:u().circle}),(0,a.jsx)("div",{className:u().rectangle})]}),(0,a.jsxs)("div",{className:u().content,children:[(0,a.jsx)("div",{className:u().circle}),(0,a.jsx)("div",{className:u().rectangle})]})]})}var _=r(6304),h=r(7132),m=r(6766),x=r(4500),N=r(6708),g=r(3463),j=r(760),v=r(5658),T=r.n(v),I=r(3313);function f(e){let t=(0,x.j)();return(0,a.jsxs)("div",{className:T().container,children:[(0,a.jsxs)("div",{className:T().leftSide,children:[(0,a.jsx)("div",{className:T().circle}),(0,a.jsx)(m.default,{src:"".concat(_.Jp).concat(e.product.photo),alt:"icon",width:44,height:30,className:T().icon}),(0,a.jsxs)("div",{className:T().titleContainer,style:{minWidth:"".concat(e.minTitleWidth,"ch")},children:[(0,a.jsx)("p",{className:T().producTitleText,children:e.product.title}),(0,a.jsx)("p",{className:T().productSerialNumberText,children:e.product.serialNumber})]})]}),(0,a.jsx)("p",{className:"".concat(T().freeText," ").concat(0==e.product.isNew?T().textBlack:T().textGreen),children:0===e.product.isNew?"В ремонете":"Свободен"}),(0,a.jsx)(m.default,{src:"".concat(_.Jp,"/icons/trash-icon.png"),alt:"trash icon",width:12,height:13,className:T().trashIcon,onClick:r=>{r.stopPropagation(),t((0,N.ol)({message:I.y,deleteItemId:e.product.id.toString(),deleteItemTitle:e.product.title,deleteItemSerialNumber:e.product.serialNumber.toString(),deleteIconPath:e.product.photo}))}})]})}var C=r(5961),w=r.n(C);function P(e){return(0,a.jsxs)(g.P.div,{className:w().container,initial:{opacity:0,scale:0,left:"100%"},animate:{opacity:1,scale:1,left:"105%"},exit:{opacity:0,scale:0},style:{transformOrigin:"left"},children:[(0,a.jsx)("p",{className:w().orderTitle,children:e.orderTitle}),(0,a.jsxs)("div",{className:w().addProductContainer,children:[(0,a.jsx)("div",{className:w().addProductCircle,children:(0,a.jsx)("p",{children:"+"})}),(0,a.jsx)("p",{children:"Добавить продукт"})]}),(0,a.jsx)("div",{className:w().availableProductsContainer,children:e.products.map(t=>{let r=Math.max(...e.products.map(e=>e.title.length));return(0,a.jsx)(f,{product:t,minTitleWidth:r},t.id)})}),(0,a.jsx)("button",{className:w().closeButton,onClick:t=>{t.stopPropagation(),e.onCloseClick()},children:(0,a.jsx)(m.default,{src:"".concat(_.Jp,"/icons/close-icon.svg"),alt:"close icon",width:18,height:18})})]})}let b={deleteMessage:"Вы уверены, что хотите удалить этот приход?"};function y(e){let t=(0,x.j)(),r=t=>{let r=e.products.map(e=>{let r=e.price.filter(e=>e.symbol===t);return r.length>0?r[0].value:0}).reduce((e,t)=>e+t,0);return"".concat((0,_.Xt)(r)," ").concat(t)};return(0,a.jsxs)(g.P.div,{className:s().order,initial:{height:0,scaleY:0},animate:{height:"74px",scaleY:1},exit:{height:0,scaleY:0},transition:{duration:.2},style:e.shortLength?{width:"466px",minWidth:"400px",maxWidth:"466px",transformOrigin:"top"}:{width:"100%",minWidth:"1100px",maxWidth:"1436px",transformOrigin:"top"},onClick:t=>{t.stopPropagation(),e.onShowOrderProducts()},children:[!e.shortLength&&(0,a.jsx)("div",{className:s().titleContainer,children:(0,a.jsx)("p",{className:s().title,children:e.order.title})}),(0,a.jsxs)("div",{className:s().centerContainer,children:[(0,a.jsx)(p,{}),(0,a.jsxs)("div",{className:s().productCountContainer,children:[(0,a.jsx)("p",{className:s().productCount,children:e.products.length}),(0,a.jsx)("p",{className:s().productText,children:"Продукта"})]}),(0,a.jsxs)("div",{className:s().dateContainer,children:[(0,a.jsx)("p",{className:s().dateShort,children:(0,_.zh)(e.order.date)}),(0,a.jsx)("p",{className:s().dateFull,children:(0,_._w)(e.order.date)})]}),!e.shortLength&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:s().usdPriceText,children:r(h.A.usd)}),(0,a.jsx)("p",{className:s().uahPriceText,children:r(h.A.uah)})]})]}),!e.shortLength&&(0,a.jsx)(m.default,{src:"".concat(_.Jp,"/icons/trash-icon.png"),alt:"trash icon",width:12,height:14,className:s().trashIcon,onClick:r=>{r.stopPropagation(),t((0,N.ol)({message:b.deleteMessage,deleteItemId:e.order.id.toString(),deleteItemTitle:e.order.title,deleteItemSerialNumber:"",deleteIconPath:""}))}}),e.showOrderProducts&&(0,a.jsx)("div",{className:s().arrow,children:(0,a.jsx)("p",{children:">"})}),(0,a.jsx)(j.N,{children:e.showOrderProducts&&(0,a.jsx)(P,{orderTitle:e.order.title,products:e.products,onCloseClick:()=>e.onHideOrderProducts()})})]})}var k=r(2362),S=r(6116);function O(){let[e,t]=(0,c.useState)(null),[r,o]=(0,c.useState)([]),[n,s]=(0,c.useState)(null),[l,u]=(0,c.useState)(!1),p=(0,x.G)(e=>e.deleteModal),_=(0,x.G)(e=>e.search),h=(0,x.j)();(0,c.useEffect)(()=>{e&&g(e.orders)},[_]),(0,c.useEffect)(()=>{if(p.delete&&e){let t=e.orders.find(e=>e.title===p.deleteItemTitle),r=e.products.find(e=>e.title==p.deleteItemTitle);t&&v(Number.parseInt(p.deleteItemId)),r&&m(Number.parseInt(p.deleteItemId)),h((0,N.P8)())}},[p]),(0,c.useEffect)(()=>{T()},[]);let m=async r=>{await (0,k.J)(r);let a=await (0,k.u)();a&&t({orders:e?e.orders:[],products:a})},g=e=>{o(e.filter(e=>e.title.toLowerCase().includes(_.value.toLowerCase())))},v=async r=>{await (0,d.k)(r);let a=await (0,d.Z)();a&&(t({orders:a,products:e?e.products:[]}),g(a))},T=async()=>{let e=await (0,d.Z)(),r=await (0,k.u)();e&&r&&(t({orders:e,products:r}),g(e))};return(0,a.jsx)("div",{className:i().page,children:(0,a.jsxs)("div",{className:i().content,children:[(0,a.jsxs)("div",{className:i().titleContainer,children:[(0,a.jsx)("div",{className:i().titleIcon,children:(0,a.jsx)("div",{className:i().titleIconInnerCircle,children:(0,a.jsx)("p",{children:"+"})})}),(0,a.jsx)("p",{className:i().title,children:"Приходы / ".concat(r.length)})]}),e&&(0,a.jsx)("div",{className:i().ordersContainer,children:(0,a.jsx)(j.N,{children:r.map(t=>{let r=e.products.filter(e=>e.order===t.id);return(0,a.jsx)(y,{order:t,products:r,shortLength:l,showOrderProducts:n===t.id,onShowOrderProducts:()=>{u(!0),s(t.id)},onHideOrderProducts:()=>{u(!1),s(null)}},t.id)})})}),!e&&(0,a.jsx)(S.A,{})]})})}},7660:(e,t,r)=>{"use strict";let a;r.d(t,{Z:()=>i,k:()=>d});var c=r(3464),o=r(4065);let i=async()=>{if(a)return a;try{let e=await c.A.get(o.v);if(200===e.status)return a=e.data,e.data;console.error("Failed to load orders:",e.statusText)}catch(e){console.error(e)}},d=e=>{a&&(a=a.filter(t=>t.id!=e))}},7874:e=>{e.exports={page:"page_page__4JXH2",content:"page_content__bGLvr",titleContainer:"page_titleContainer__hJ0QP",titleIcon:"page_titleIcon__4jO4O",titleIconInnerCircle:"page_titleIconInnerCircle__nM5ru",title:"page_title___HNHG",ordersContainer:"page_ordersContainer__IqmpP"}},8707:e=>{e.exports={order:"order_order__Nsmnl",centerContainer:"order_centerContainer__Oyd4Q",titleContainer:"order_titleContainer__BMUdg",title:"order_title__xgCcz",productCountContainer:"order_productCountContainer__8o2xX",productCount:"order_productCount__Cv9sE",productText:"order_productText__0d6cX",dateContainer:"order_dateContainer__MTDC7",dateFull:"order_dateFull__uil1g",dateShort:"order_dateShort__HZGrk",usdPriceText:"order_usdPriceText__HY3y2",uahPriceText:"order_uahPriceText__LByza",trashIcon:"order_trashIcon__bIHJ6",arrow:"order_arrow__XkYVZ"}}},e=>{e.O(0,[516,270,441,964,358],()=>e(e.s=7130)),_N_E=e.O()}]);